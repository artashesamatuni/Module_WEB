<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>EM-1044</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta name="description" content="EM-1044">
    <meta name="author" content="EagleMON">
    <meta name="theme-color" content="#000000" />
    <link rel="stylesheet" href="/localstorage/css/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body class='w3-content' style='max-width:600px;min-width:300px'>
    <div class="w3-top" style="max-width:600px;min-width:300px">
        <div class="w3-light-gray w3-bar">
            <div id="small_menu" class="w3-top w3-bar-block w3-white w3-border w3-hide w3-hide-large w3-hide-medium">
                <a href="javascript:void(0)" class="w3-bar-item w3-button" onclick="smallMenu()"><i class="fa fa-window-close-o"></i></a>
                <a href="/localstorage/modules/ai/ai_main.php" class="w3-bar-item w3-button">Analog Inputs</a>
                <a href="/localstorage/modules/di/di_main.php" class="w3-bar-item w3-button">Digital Inputs</a>
                <a href="/localstorage/modules/do/do_main.php" class="w3-bar-item w3-button">Digital Outputs</a>
                <hr/><a href="/localstorage/modules/mbus/mbus_main.php" class="w3-bar-item w3-button">Modbus Settings</a>
                <a href="/localstorage/modules/access/login_main.php" class="w3-bar-item w3-button">Access control</a>
                <a href="/localstorage/modules/config/config_main.php" class="w3-bar-item w3-button">Settings</a>
                <a onclick="document.getElementById('help').style.display='block'" class="w3-bar-item w3-button">Help</a>
            </div>
            <a href="javascript:void(0)" class="w3-bar-item w3-button w3-left w3-hide-large w3-hide-medium" onclick="smallMenu()"><i class="fa fa-navicon"></i></a>
            <div class="w3-right">
                <a href="/index.php" class="w3-bar-item w3-button">Dashboard</a>
                <div class="w3-dropdown-click w3-hide-small">
                    <button class="w3-button" onclick="dropdown()">Configuration&nbsp;<i class="fa fa-caret-down"></i></button>
                    <div id="config_menu" class="w3-dropdown-content w3-bar-block w3-border" style="z-index:10">
                        <a href="/localstorage/modules/ai/ai_main.php" class="w3-bar-item w3-button">Analog Inputs</a>
                        <a href="/localstorage/modules/di/di_main.php" class="w3-bar-item w3-button">Digital Inputs</a>
                        <a href="/localstorage/modules/do/do_main.php" class="w3-bar-item w3-button">Digital Outputs</a>
                        <hr/><a href="/localstorage/modules/mbus/mbus_main.php" class="w3-bar-item w3-button">Modbus Settings</a>
                        <a href="/localstorage/modules/access/login_main.php" class="w3-bar-item w3-button">Access control</a>
                        <a href="/localstorage/modules/config/config_main.php" class="w3-bar-item w3-button">Settings</a>
                    </div>
                </div>
                <a onclick="document.getElementById('help').style.display='block'" class="w3-bar-item w3-button w3-hide-small">Help</a>
                <a href="http://www.eaglemon.com" target="_blank" class="w3-bar-item w3-right">
                    <image alt="logo" src="/localstorage/images/logo_s.png" style="height: 24px" />
                </a>
            </div>
            <div class="w3-left">
                <div class="w3-bar-item"><img src="/localstorage/images/img_avatar1.png" class="w3-circle w3-border" alt="Admin" width="24" height="24" /></div>
                <div class="w3-bar-item">admin</div>
            </div>
        </div>
    </div>

    <script type='text/javascript'>
        function dropdown() {
            var x = document.getElementById("config_menu");
            if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
            } else {
                x.className = x.className.replace(" w3-show", "");
            }
        }

        function smallMenu() {
            var x = document.getElementById("small_menu");
            if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
            } else {
                x.className = x.className.replace(" w3-show", "");
            }
        }
    </script>
    <div class="w3-main" style="height: 100%; margin-top:48px;margin-bottom:64px;">
        <div class='w3-row w3-light-gray'>
            <div class='w3-col  m4 s4'>
                <button onclick="fn_1()" class='w3-button w3-block w3-light-gray w3-border-right w3-border-left w3-border-top' id='btn1'>MQTT Server Config</button>
            </div>
            <div class='w3-col  m4 s4'>
                <button onclick="fn_2()" class='w3-button w3-block w3-gray w3-text-white w3-border-right w3-border-left w3-border-top' id='btn2'>MQTT Certificates</button>
            </div>
            <div class='w3-col  m4 s4'>
                <button onclick="fn_3()" class='w3-button w3-block w3-gray w3-text-white w3-border-right w3-border-left w3-border-top' id='btn3'>MQTT Channels Topics</button>
            </div>
        </div>

        <script type='text/javascript'>
            function fn_1() {
                var x = document.getElementById("tab1");
                if (x.className.indexOf("w3-show") == -1) {
                    x.className = "w3-container w3-show";
                    document.getElementById("btn1").className = "w3-button w3-block w3-light-gray w3-border-right w3-border-left w3-border-top";
                    document.getElementById("tab1").className = "w3-container w3-show";
                    document.getElementById("btn2").className = "w3-button w3-block w3-gray w3-text-white w3-border-right w3-border-left w3-border-top";
                    document.getElementById("tab2").className = "w3-container w3-hide";
                    document.getElementById("btn3").className = "w3-button w3-block w3-gray w3-text-white w3-border-right w3-border-left w3-border-top";
                    document.getElementById("tab3").className = "w3-container w3-hide";
                }
                document.cookie = "c_tab=1";
            }

            function fn_2() {
                var x = document.getElementById("tab2");
                if (x.className.indexOf("w3-show") == -1) {
                    x.className = "w3-container w3-show";
                    document.getElementById("btn1").className = "w3-button w3-block w3-gray w3-text-white w3-border-right w3-border-left w3-border-top";
                    document.getElementById("tab1").className = "w3-container w3-hide";
                    document.getElementById("btn2").className = "w3-button w3-block w3-light-gray w3-border-right w3-border-left w3-border-top";
                    document.getElementById("tab2").className = "w3-container w3-show";
                    document.getElementById("btn3").className = "w3-button w3-block w3-gray w3-text-white w3-border-right w3-border-left w3-border-top";
                    document.getElementById("tab3").className = "w3-container w3-hide";
                }
                document.cookie = "c_tab=2";
            }

            function fn_3() {
                var x = document.getElementById("tab3");
                if (x.className.indexOf("w3-show") == -1) {
                    x.className = "w3-container w3-show";
                    document.getElementById("btn1").className = "w3-button w3-block w3-gray w3-text-white w3-border-right w3-border-left w3-border-top";
                    document.getElementById("tab1").className = "w3-container w3-hide";
                    document.getElementById("btn2").className = "w3-button w3-block w3-gray w3-text-white w3-border-right w3-border-left w3-border-top";
                    document.getElementById("tab2").className = "w3-container w3-hide";
                    document.getElementById("btn3").className = "w3-button w3-block w3-light-gray w3-border-right w3-border-left w3-border-top";
                    document.getElementById("tab3").className = "w3-container w3-show";
                }
                document.cookie = "c_tab=3";
            }
            fn_1();
        </script>
        <div class="w3-container w3-border-right w3-border-left w3-border-bottom w3-light-gray">
            <div id="tab1" class="w3-container w3-show">
                <br/>
                <form method="post" action="mqtt_config_save.php"><input type="hidden" name="id" value="1" />
                    <div class="w3-row-padding">
                        <div class="w3-col m2 s2">
                            <label>Enable</label>
                            <br/>
                            <input type="checkbox" class="w3-check" name="enabled" value="1" checked="checked" />
                        </div>
                        <div class="w3-col m10 s10">
                            <label>Server*</label>
                            <input name="addr" class="w3-input w3-border" type="text" size="36" placeholder="e.g. test.mosquitto.org" value="109.75.38.38" />
                        </div>
                        <div class="w3-col m6 s6">
                            <label>Base-topic*</label>
                            <input name="topic" class="w3-input w3-border" type="text" size="36" value="eaglemon" />
                        </div>
                        <div class="w3-col m6 s6">
                            <label>Feed prefix</label>
                            <input name="prefix" class="w3-input w3-border" type="text" size="36" value="em-1044" />
                        </div>
                        <div class="w3-col m3 s6">
                            <label>Interval[sec.]</label>
                            <input name="interval" class="w3-input w3-border" type="number" min="1" max="60" value="5" />
                        </div>
                        <div class="w3-col m3 s6">
                            <label>Port</label>
                            <input name="port" class="w3-input w3-border" type="number" min="1" max="99999" value="1883" />
                        </div>
                        <div class="w3-col m12 s12">
                            <label>Username</label>
                            <input name="username" class="w3-input w3-border" type="text" value="admin" />
                        </div>
                        <div class="w3-col m12 s12">
                            <label>Password</label>
                            <input name="password" class="w3-input w3-border" type="password" />
                        </div>
                        <div class="w3-col m12 s12">
                            <label>Enable SSL</label>
                            <br/>
                            <input type="checkbox" class="w3-check" name="crt_enabled" value="1" checked="checked" />
                        </div>
                    </div>
                    <br/>
                    <div class="w3-row-padding">
                        <div class="w3-col m12 s12">
                            <input type="submit" name="save" class="w3-button w3-block w3-green" value="Save" />
                        </div>
                    </div>
                </form>
                <br/>
            </div>
            <div id="tab2" class="w3-container w3-hide">
                <br/>
                <table class="w3-table w3-border">
                    <tr>
                        <th>Type</th>
                        <th>File</th>
                    </tr>
                    <tbody>
                        <tr>
                            <td>PEM</td>
                            <td>test1.cert.pem</td>
                        </tr>
                        <tr>
                            <td>KEY</td>
                            <td>test1.private.key</td>
                        </tr>
                        <tr>
                            <td>CRT</td>
                            <td>root-CA.crt</td>
                        </tr>
                    </tbody>
                </table>
                <br/>
                <div class="w3-col m12 s12">
                    <div class="w3-right">
                        <button onclick="document.getElementById('upload').style.display='block'" class="w3-button w3-block w3-green">Upload Certificates</button>
                    </div>
                </div>
                <br/><br/>
                <br/>
            </div>
            <div id="tab3" class="w3-container w3-hide">
                <br/>
                <table class="w3-table w3-border">
                    <tr>
                        <td><b>Name</b></td>
                        <td><b>Topic</b></td>
                    </tr>
                    <tbody>
                        <tr>
                            <td>Gate</td>
                            <td>24007867890c3020048e/eaglemon/r0</td>
                        </tr>
                        <tr>
                            <td>Gate</td>
                            <td>24007867890c3020048e/eaglemon/r1</td>
                        </tr>
                        <tr>
                            <td>Lamp</td>
                            <td>24007867890c3020048e/eaglemon/r2</td>
                        </tr>
                        <tr>
                            <td>Motor</td>
                            <td>24007867890c3020048e/eaglemon/r3</td>
                        </tr>
                        <tr>
                            <td>Pump</td>
                            <td>24007867890c3020048e/eaglemon/ai0</td>
                        </tr>
                        <tr>
                            <td>Temperature</td>
                            <td>24007867890c3020048e/eaglemon/ai1</td>
                        </tr>
                        <tr>
                            <td>Tank</td>
                            <td>24007867890c3020048e/eaglemon/ai2</td>
                        </tr>
                        <tr>
                            <td>Level</td>
                            <td>24007867890c3020048e/eaglemon/ai3</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>24007867890c3020048e/eaglemon/di0</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>24007867890c3020048e/eaglemon/di1</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>24007867890c3020048e/eaglemon/di2</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>24007867890c3020048e/eaglemon/di3</td>
                        </tr>
                        <tr>
                            <td>CPU t°C</td>
                            <td>24007867890c3020048e/eaglemon/cpu_temp</td>
                        </tr>
                        <tr>
                            <td>Local IP</td>
                            <td>24007867890c3020048e/eaglemon/ip</td>
                        </tr>
                    </tbody>
                </table><br/>
                <footer class="w3-center w3-green">Connected</footer><br/></div>
        </div>
    </div>
    <div class="w3-bottom w3-light-gray" style="max-width:600px;min-width:300px">
        <div class="w3-bar w3-center">04:04 pm Tuesday, 20 Mar 2018</div>
        <div class="w3-bar w3-center">
            <h4><span class="w3-text-gray">Eagle</span><span class="w3-text-orange">MON</span></h4>
        </div>
    </div>
</body>

</html>
<div id="upload" class="w3-modal">
    <div class="w3-modal-content">
        <span onclick="document.getElementById('upload').style.display='none'" class="w3-button w3-light-gray w3-text-red w3-display-topright"><i class="fa fa-close"></i></span>
        <div class="w3-container w3-border-right w3-border-left w3-border-bottom w3-light-gray">

            <h4>Upload Server Certificates</h4>
            <form action="mqtt_cert_upload.php" method="post" enctype="multipart/form-data">
                <label>Certificate</label>
                <br/>
                <input type="file" name="fileToUpload" id="fileToUpload">
                <br/>
                <br/>
                <input class="w3-button w3-green" type="submit" value="Upload File" name="submit">
            </form>
            <br/>
        </div>
    </div>
</div>
